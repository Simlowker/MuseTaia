# Conceptual configuration for GKE Node Pool
# Use with: gcloud container node-pools create
apiVersion: container.googleapis.com/v1
kind: NodePool
metadata:
  name: smos-visual-lobe-pool
spec:
  config:
    machineType: g2-standard-8
    accelerators:
      - acceleratorCount: 1
        acceleratorType: nvidia-l4
    imageType: UBUNTU_CONTAINERD
    labels:
      runtime: criu-enabled
      lobe: creative-studio
    # Metadata to trigger CRIU/Snapshot installation on nodes
    metadata:
      enable-os-login: "true"
      install-criu: "true"
  initialNodeCount: 1
  autoscaling:
    enabled: true
    minNodeCount: 1
    maxNodeCount: 10
  management:
    autoUpgrade: true
    autoRepair: true